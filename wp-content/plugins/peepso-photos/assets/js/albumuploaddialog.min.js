!function n(p,d,h){function r(t,o){if(!d[t]){if(!p[t]){var i="function"==typeof require&&require;if(!o&&i)return i(t,!0);if(a)return a(t,!0);var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var s=d[t]={exports:{}};p[t][0].call(s.exports,function(o){return r(p[t][1][o]||o)},s,s.exports,n,p,d,h)}return d[t].exports}for(var a="function"==typeof require&&require,o=0;o<h.length;o++)r(h[o]);return r}({1:[function(o,t,i){(function(o){"use strict";var t,i,s,n,p="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null,d=window.psdata_photos_albumuploaddialog&&window.psdata_photos_albumuploaddialog.template;function e(o,t){this.create(o,t),this.popup.popup.show()}t=jQuery,(i=peepso).PhotoAlbumUploadDialog=(s=t,(n=i).npm.objectAssign(e.prototype,n.npm.EventEmitter.prototype,{template:psdata_photos_albumuploaddialog.template,create:function(o,t){var i="ps-js-dialog-create-album",e=_.uniqueId(i+"-");this.user_id=o||peepsodata.userid,this.album_id=t,this.popup=(0,p.dialog)(d,{wide:!0}).show(),this.$el=this.popup.$el,this.$el.addClass(i).attr("id",e),this.$submit=this.$el.find(".ps-js-submit"),this.$loading=this.$el.find(".ps-js-loading"),this.$container=this.$el.find(".ps-js-photos-container"),this.$upload=this.$el.find(".ps-js-photos-upload"),this.$el.on("click",".ps-js-photos-upload-button",s.proxy(this.onUpload,this)),this.$el.on("click",".ps-js-cancel",s.proxy(this.onClose,this)),this.$el.on("click",".ps-js-submit",s.proxy(this.onSubmit,this)),this.$el.appendTo(document.body),this.dropzone=new n.PhotoDropzone(this.$el.find(".ps-js-photos-container")),this.dropzone.on("photo_added",s.proxy(this.onPhotoAdded,this)),this.dropzone.on("photo_upload_start",s.proxy(this.onPhotoUploadStart,this)),this.dropzone.on("photo_upload_done",s.proxy(this.onPhotoUploadDone,this)),this.dropzone.on("photo_empty",s.proxy(this.onPhotoEmpty,this))},onUpload:function(){this.dropzone.triggerUpload()},onPhotoAdded:function(){this.$upload.hide(),this.$container.show()},onPhotoUploadStart:function(){this.$submit.attr("disabled","disabled")},onPhotoUploadDone:function(o){o<=0&&this.$submit.removeAttr("disabled")},onPhotoEmpty:function(){this.$container.hide(),this.$upload.show()},onClose:function(o){o.preventDefault(),o.stopPropagation(),this.dropzone.destroy(),this.$el.remove()},onSubmit:function(){var o,t=this.dropzone.getPhotos(),i=!1;1<=t.length?this.$el.find(".ps-js-error-photo").hide():(this.$el.find(".ps-js-error-photo").show(),i=!0),i||(o={user_id:this.user_id,album_id:this.album_id,type:"photo",photo:t,_wpnonce:this.$el.find("[name=_wpnonce]").val(),_wp_http_referer:this.$el.find("[name=_wp_http_referer]").val()},o=n.observer.applyFilters("photos_add_photos_to_album_req",o),this.$submit.attr("disabled","disabled"),this.$loading.show(),n.postJson("photosajax.add_photos_to_album",o,s.proxy(function(o){this.$loading.hide(),this.$submit.removeAttr("disabled"),o.success&&(this.$el.remove(),window.location.reload())},this)))}}),e)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);