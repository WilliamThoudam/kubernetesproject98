!function n(a,p,l){function r(t,o){if(!p[t]){if(!a[t]){var e="function"==typeof require&&require;if(!o&&e)return e(t,!0);if(d)return d(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var s=p[t]={exports:{}};a[t][0].call(s.exports,function(o){return r(a[t][1][o]||o)},s,s.exports,n,a,p,l)}return p[t].exports}for(var d="function"==typeof require&&require,o=0;o<l.length;o++)r(l[o]);return r}({1:[function(o,t,e){(function(o){"use strict";var t,e,r,d,i="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null,s=window.psdata_photos_albumdialog&&window.psdata_photos_albumdialog.template;function n(o){this.create(o),this.popup.popup.show()}t=jQuery,(e=peepso).PhotoAlbumDialog=(r=t,(d=e).npm.objectAssign(n.prototype,d.npm.EventEmitter.prototype,{template:psdata_photos_albumdialog.template,album_url:psdata_photos_albumdialog.album_url,create:function(o){var t="ps-js-dialog-create-album",e=_.uniqueId(t+"-");this.user_id=o||peepsodata.userid,this.popup=(0,i.dialog)(s,{wide:!0}).show(),this.$el=this.popup.$el,this.$el.addClass(t).attr("id",e),this.$submit=this.$el.find(".ps-js-submit"),this.$loading=this.$el.find(".ps-js-loading"),this.$container=this.$el.find(".ps-js-photos-container"),this.$upload=this.$el.find(".ps-js-photos-upload"),this.$el.on("click",".ps-js-photos-upload-button",r.proxy(this.onUpload,this)),this.$el.on("click",".ps-js-cancel",r.proxy(this.onClose,this)),this.$el.on("click",".ps-js-submit",r.proxy(this.onSubmit,this)),this.$el.appendTo(document.body),this.dropzone=new d.PhotoDropzone(this.$el.find(".ps-js-photos-container")),this.dropzone.on("photo_added",r.proxy(this.onPhotoAdded,this)),this.dropzone.on("photo_upload_start",r.proxy(this.onPhotoUploadStart,this)),this.dropzone.on("photo_upload_done",r.proxy(this.onPhotoUploadDone,this)),this.dropzone.on("photo_empty",r.proxy(this.onPhotoEmpty,this)),d.observer.applyFilters("photo_create_album",{popup:this.$el})},onUpload:function(){this.dropzone.triggerUpload()},onPhotoAdded:function(){this.$upload.hide(),this.$container.show()},onPhotoUploadStart:function(){this.$submit.attr("disabled","disabled")},onPhotoUploadDone:function(o){o<=0&&this.$submit.removeAttr("disabled")},onPhotoEmpty:function(){this.$container.hide(),this.$upload.show()},onClose:function(o){o.preventDefault(),o.stopPropagation(),this.dropzone.destroy(),this.$el.remove()},onSubmit:function(){var o,t,e,i,s,n=r.trim(this.$el.find("[name=album_name]").val()),a=r.trim(this.$el.find("[name=album_desc]").val()),p=this.dropzone.getPhotos(),l=!1;n.length?this.$el.find(".ps-js-error-name").hide():(this.$el.find(".ps-js-error-name").show(),l=!0),1<=p.length?this.$el.find(".ps-js-error-photo").hide():(this.$el.find(".ps-js-error-photo").show(),l=!0),l||(o={user_id:this.user_id,name:n,description:a,privacy:this.$el.find("[name=album_privacy]").val(),type:"album",photo:p,_wpnonce:this.$el.find("[name=_wpnonce]").val(),_wp_http_referer:this.$el.find("[name=_wp_http_referer]").val()},o=d.observer.applyFilters("photos_create_album_req",o),e=(t=this.$el.find("[name=album_location]")).data("location"),i=t.data("latitude"),s=t.data("longitude"),e&&i&&s&&(o["location[name]"]=e,o["location[latitude]"]=i,o["location[longitude]"]=s),this.$submit.attr("disabled","disabled"),this.$loading.show(),d.postJson("photosajax.create_album",o,r.proxy(function(o){var t;this.$loading.hide(),this.$submit.removeAttr("disabled"),o.success&&(this.$el.remove(),t=this.album_url+"/"+o.data.album_id,window.location.href=t)},this)))}}),n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);