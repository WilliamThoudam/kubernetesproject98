!function e(t,i,o){function n(r,p){if(!i[r]){if(!t[r]){var a="function"==typeof require&&require;if(!p&&a)return a(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){return n(t[r][1][e]||e)},l,l.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(e,t,i){(function(e){"use strict";var t,i,o,n="undefined"!=typeof window?window.peepso:void 0!==e?e.peepso:null,s=window.peepsogroupsdata&&window.peepsogroupsdata.dialogCreateTemplate;function r(e){this.opts=e||{},this.create()}t=jQuery,i=t,peepso.npm.objectAssign(r.prototype,{template:peepsogroupsdata.dialogCreateTemplate,create:function(){this.popup=(0,n.dialog)(s,{wide:!0}).show(),this.$el=this.popup.$el,this.$submit=this.$el.find(".ps-js-submit"),this.$loading=this.$el.find(".ps-js-loading"),this.$el.on("input","[name=group_name]",i.proxy(this.onInput,this)),this.$el.on("input","[name=group_desc]",i.proxy(this.onInput,this)),this.$el.on("click",".ps-js-dropdown--privacy .ps-js-dropdown-menu a",i.proxy(this.onChangePrivacy,this)),this.$el.on("click",".ps-js-cancel",i.proxy(this.onClose,this)),this.$el.on("click",".ps-js-submit",i.proxy(this.onSubmit,this)),this.$el.appendTo(document.body)},onInput:function(e){var t=i(e.currentTarget),o=t.parent().find(".ps-js-limit"),n=+t.data("maxlength"),s=t.val();n&&s.length>n&&(s=s.substr(0,n),t.val(s)),o.html(n-s.length)},onChangePrivacy:function(e){var t=i(e.currentTarget),o=t.closest(".ps-js-dropdown").find(".ps-js-dropdown-toggle");o.find(".dropdown-value span").text(t.find(".ps-dropdown__group-title span").text()),o.find(".dropdown-value [class*=ps-icon]").attr("class",t.find(".ps-dropdown__group-title [class*=ps-icon]").attr("class")),this.$el.find("input[name=group_privacy]").val(t.data("optionValue"))},onClose:function(e){e.preventDefault(),e.stopPropagation(),this.$el.remove()},onSubmit:function(){var e,t=i.trim(this.$el.find("[name=group_name]").val()),o=i.trim(this.$el.find("[name=group_desc]").val()),n=i.trim(this.$el.find("[name=group_id]").val()),s=new Array,r=this.$el.find("[name=group_privacy]").val(),p=this.$el.find("[name=_wpnonce]").val();this.$el.find("[name=category_id]:checked").each(function(){s.push(i(this).val())}),e={name:t,description:o,group_parent_id:n,category_id:s,meta:{privacy:r},_wpnonce:p},this.$submit.attr("disabled","disabled"),this.$loading.show(),peepso.postJson("groupajax.create",e,function(e){var t;this.$loading.hide(),this.$submit.removeAttr("disabled"),e.success?e.data&&e.data.redirect&&(window.location=e.data.redirect):e.errors&&e.errors.length&&((t=e.errors[0]||{}).name?this.$el.find(".ps-js-error-name").html(t.name).show():this.$el.find(".ps-js-error-name").hide(),t.description?this.$el.find(".ps-js-error-desc").html(t.description).show():this.$el.find(".ps-js-error-desc").hide(),t.category_id?this.$el.find(".ps-js-error-category_id").html(t.category_id).show():this.$el.find(".ps-js-error-category_id").hide())}.bind(this))}}),o=r,peepso.groups||(peepso.groups={}),peepso.groups.dlgCreate=function(e){new o(e).popup.show()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);