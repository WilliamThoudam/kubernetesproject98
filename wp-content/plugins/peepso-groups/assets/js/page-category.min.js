!function a(r,n,i){function c(t,e){if(!n[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=n[t]={exports:{}},r[t][0].call(o.exports,function(e){return c(r[t][1][e]||e)},o,o.exports,a,r,n,i)}return n[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)c(i[e]);return c}({1:[function(e,t,E){(function(q){(function(){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.default=function(){n||(n=(0,o.dialog)(t.group_category.template_avatar,{wide:!0,destroyOnClose:!1}).show(),i=n.$el,i.find(".ps-js-upload").on("click",P),d=function(){var e='<input type="file" name="filedata" accept="'.concat("image/*",'" data-name="').concat("group-category-avatar-upload",'" />'),e=(0,c.default)(e).css({position:"absolute",opacity:0,height:1,width:1});return e.appendTo(document.body),e.psFileupload({formData:{category_id:b,_wpnonce:k},dataType:"json",url:D,replaceFileInput:!1,add:function(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png)$/i)?o.size>j?g.html(O).show():(g.hide(),t.submit()):g.html(M).show()},done:function(e,t){t=t.result;t.success?(F(t.data&&t.data.image_url,t.data&&t.data.orig_image_url),z=!0,u.removeAttr("disabled")):t.errors&&g.html(t.errors[0]).show()}}),e}(),s=i.find(".ps-js-remove").on("click",T),u=i.find(".ps-js-submit").on("click",Q),p=i.find(".ps-js-btn-crop").on("click",C),l=i.find(".ps-js-btn-crop-cancel").on("click",S),f=i.find(".ps-js-btn-crop-save").on("click",$),g=i.find(".ps-js-error").hide(),i.find(".ps-js-loading").hide(),h=i.find(".ps-js-has-avatar"),y=i.find(".ps-js-no-avatar"),v=i.find(".ps-js-original"),w=i.find(".ps-js-preview"),F.apply(null,A?[t.group_category.img_avatar,t.group_category.img_avatar_original]:[]),u.attr("disabled","disabled"));return n};var e,c=(e="undefined"!=typeof window?window.jQuery:void 0!==q?q.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==q?q.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==q?q.peepsodata:null;var a,r,n,i,d,s,u,p,l,f,g,h,y,v,w,_,m,j=+peepsodata.upload_size,b=+t.group_category.id,x=t.group_category.img_avatar_default,k=t.group_category.avatar_nonce,D="".concat(peepsodata.ajaxurl_legacy,"groupcategoryajax.avatar_upload"),M=t.group_category.text_error_filetype,O=t.group_category.text_error_filesize,A=+t.group_category.has_avatar,z=!1,W=null;function F(e,t){var o;e?(s.show(),y.hide(),h.show(),o="?nocache-"+(new Date).getTime(),A=!0,a=e,w.attr("src","".concat(a).concat(o)),t&&(r=t,v.attr("src","".concat(r).concat(o)))):(s.hide(),h.hide(),y.show(),A=!1,a=x,r=null,w.attr("src",a),v.removeAttr("src")),p.show(),l.hide(),f.hide()}function P(e){e.preventDefault(),d[0].value=null,d.trigger("click")}function T(e){e.preventDefault();e={category_id:b,_wpnonce:k};o.ajax.post("groupcategoryajax.avatar_delete",e).then(function(e){e.success&&(F(null),n.hide(),z=!1,u.attr("disabled","disable"),o.hooks.doAction("group_category_avatar_updated",b,x))})}function Q(e){var t;e.preventDefault(),m||(z?(t={category_id:b,_wpnonce:k},m=!0,o.ajax.post("groupcategoryajax.avatar_confirm",t).then(function(e){e.success&&(e=e.data&&e.data.image_url,n.hide(),z=!1,u.attr("disabled","disabled"),o.hooks.doAction("group_category_avatar_updated",b,e))}).always(function(){m=!1})):W?(t=c.default.extend(W,{u:b,_wpnonce:k},{tmp:"",preview:""}),m=!0,o.ajax.post("groupcategoryajax.avatar_crop",t).then(function(e){e.success&&(e.data&&e.data.image_url,n.hide(),window.location.reload(!0))}).always(function(){m=!1})):n.hide())}function C(e){e.preventDefault(),window.ps_crop.init({elem:v,change:function(e){_=function(e,t){var o,a,r=(0,c.default)(e),n=1,i=!1;e.naturalWidth&&(o=e.naturalWidth||r.width(),a=e.naturalHeight||r.height(),(800<o||800<a)&&(n=800/Math.max(o,a),o*=n,a*=n,i=!0),n=o/r.width());t={x1:Math.floor(n*t.x),y1:Math.floor(n*t.y),x2:Math.floor(n*(t.x+t.width)),y2:Math.floor(n*(t.y+t.height))},i&&(t.width=o,t.height=a);return t}(v[0],e)}}),p.hide(),l.show(),f.show()}function S(e){e.preventDefault(),window.ps_crop.detach(v),p.show(),l.hide(),f.hide()}function $(e){e.preventDefault(),window.ps_crop.detach(v),p.show(),l.hide(),f.hide();var t={x:_.x1,y:_.y1,x2:_.x2,y2:_.y2,width:_.width,height:_.height};z?t.tmp=1:t.preview=1;e=c.default.extend(t,{u:b,_wpnonce:k});o.ajax.post("groupcategoryajax.avatar_crop",e).then(function(e){e.success&&(F(e.data.image_url),z||(W=t,u.removeAttr("disabled")))})}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(c,e,t){(function(a){(function(){"use strict";var t=o("undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null),r="undefined"!=typeof window?window.peepso:void 0!==a?a.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==a?a.peepsodata:null,n=o(c("./avatar-dialog"));function o(e){return e&&e.__esModule?e:{default:e}}var i=+e.group_category.id;(0,t.default)(function(){var o,a,e=(0,t.default)(".ps-js-focus--group-category .ps-js-avatar");e.length&&(o=e.find(".ps-js-avatar-image"),a=e.find(".ps-js-avatar-button-wrapper"),r.hooks.addAction("group_category_avatar_updated","page_group_category",function(e,t){+e==i&&o.attr("src",t),t.match(/\/group-categories\/\d+\//)?(a.css("cursor",""),a.attr("onclick","peepso.simple_lightbox('".concat(t.replace("-full.","-orig."),"'); return false"))):(a.css("cursor","default"),a.removeAttr("onclick"))}),e.find(".ps-js-avatar-button").on("click",function(e){e.preventDefault(),e.stopPropagation(),(0,n.default)().show()}))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":1}],3:[function(e,t,o){(function(t){(function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e,p=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},l="undefined"!=typeof window?window._:void 0!==t?t._:null,f="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,g=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var o,a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var n;Object.prototype.hasOwnProperty.call(e,o)&&((n=r?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(a,o,n):a[o]=e[o])}a.default=e,t&&t.set(e,a);return a}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}g.default.currentuserid;var h=+g.default.upload_size,y=+g.group_category.id,v=g.group_category.img_cover_default,w=g.group_category.cover_nonce,_="".concat(g.default.ajaxurl_legacy,"groupcategoryajax.cover_upload?cover"),m=g.group_category.text_error_filetype,j=g.group_category.text_error_filesize,b=+g.group_category.has_cover;(0,p.default)(function(){var t,a,r,n,i,c,e,o,d,s,u=(0,p.default)(".ps-js-focus--group-category .ps-js-cover");u.length&&((0,p.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),t[0].value=null,t.trigger("click")}),e='<input type="file" name="filedata" accept="'.concat("image/*",'" data-name="').concat("group-category-cover-upload",'" />'),(e=(0,p.default)(e).css({position:"absolute",opacity:0,height:1,width:1})).appendTo(document.body),e.psFileupload({formData:{category_id:y,_wpnonce:w},dataType:"json",url:_,replaceFileInput:!1,add:function(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png)$/i)?o.size>h?alert(j):(c.css("opacity",.5),t.submit()):alert(m)},done:function(e,t){var o=t.result;o.success?(t=o.data.image_url,a.show(),r.show(),b=!0,c.attr("style","").attr("src",t+"?"+Math.random()).one("load",d),f.hooks.doAction("group_cover_updated",y,t)):o.errors&&alert(o.errors)}}),t=e,a=(0,p.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();var t=(0,f.dialog)(g.group_category.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",function(){return t.hide()}),t.$el.on("click",".ps-js-submit",function(){t.hide(),c.css("opacity",.5);var e={category_id:y,_wpnonce:w};f.ajax.post("groupcategoryajax.cover_delete",e).then(function(e){e.success&&(a.hide(),r.hide(),b=!1,c.attr("style","").attr("src",v).one("load",d),f.hooks.doAction("group_cover_updated",y,v))})})}),r=(0,p.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),c.data("style",c.attr("style")),c.css("z-index",1),u.addClass("ps-focus-cover-edit"),n.show();var o=i.width()-c.width(),a=i.height()-c.height();c.draggable({cursor:"move",drag:function(e,t){t.position.left=Math.min(0,Math.max(o,t.position.left)),t.position.top=Math.min(0,Math.max(a,t.position.top))},stop:function(e,t){var o=t.position,t=100*o.left/i.width(),o=100*o.top/i.height(),t=Math.ceil(1e4*t)/1e4,o=Math.ceil(1e4*o)/1e4;c.css({left:"".concat(t,"%"),top:"".concat(o,"%")}),c.data({reposX:t,reposY:o})}})}),n=(0,p.default)(".ps-js-cover-reposition-actions").hide(),(0,p.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),u.removeClass("ps-focus-cover-edit"),n.hide(),c.css("z-index",""),c.draggable("destroy"),c.attr("style",c.data("style")).removeData("style")}),(0,p.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),u.removeClass("ps-focus-cover-edit"),n.hide(),c.css("z-index",""),c.draggable("destroy");e={category_id:y,_wpnonce:w,y:c.data("reposX"),x:c.data("reposY")};f.ajax.post("groupcategoryajax.cover_reposition",e)}),i=u.find(".ps-js-cover-wrapper"),c=u.find(".ps-js-cover-image"),b||(r.hide(),a.hide()),d=function(){c.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});var e=i.height(),t=i.width(),o=c.height(),a=c.width();o<e&&(c.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),o=c.height(),a=c.width());var r=parseFloat(c[0].style.top)||0;e<=o&&r<(n=(o-e)/e*-100)&&c.css("top","".concat(n,"%"));var n,e=parseFloat(c[0].style.left)||0;t<=a&&e<(n=(a-t)/t*-100)&&c.css("left","".concat(n,"%")),c.css("opacity","")},d=(0,l.throttle)(d,500),c.one("load",function(){return d()}).each(function(e,t){return t.complete&&d()}),f.hooks.addAction("browser_resize","group_cover",function(e){o&&o===e.width||(o=e.width,d())}),(s=(0,p.default)(".ps-js-cover-button-popup")).on("click",function(e){e.currentTarget!==e.target||(e=(0,p.default)(this).data("cover-url"))&&peepso.simple_lightbox(e)}),f.hooks.addAction("group_cover_updated","page_group_category",function(e,t){+e==y&&(-1<t.indexOf("/group-categories/".concat(e,"/"))?(s.css("cursor","pointer"),s.data("cover-url",t)):(s.css("cursor",""),s.removeData("cover-url")))}))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,o){"use strict";e("./avatar"),e("./cover")},{"./avatar":2,"./cover":3}],5:[function(e,t,o){"use strict";e("./header")},{"./header":4}]},{},[5]);